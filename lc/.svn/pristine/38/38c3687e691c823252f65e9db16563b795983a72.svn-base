<?php
header("Content-type: text/html; charset=utf-8");
include_once(APP_PATH . "/utils/Utils.php");
include_once(APP_PATH . "/utils/ResponseResult.php");
include_once(MODELS_PATH . "/admin/User.php");

//恢复Session在APIBaseController.init中
//$this->Post记录了 json_decode(file_get_contents("php://input"),true);
//$this->LoginUser 记录了当前登录用户，如果未登录，此值为[]

class UserController extends APIBaseController
{
//	public function indexAction()
//	{
//		if(!IsSet($_GET["UserID"]) || !Is_Numeric($_GET["UserID"]))
//		{	$result = new ResponseResult(false,"参数有误");
//			echo $result->AsJSon();
//			return;
//		}
//		$ret = User::getUser($_GET["UserID"]);
//		print_r($ret);
//	}
    //增删改
	public function saveAction()
	{
		//print_r($_POST);
        if($_POST["oper"]=='add'){
            //插入 序号自增
            $ret = User::insertUsers(
                $_POST["Account"],
                $_POST["Password"],
                $_POST["UserType"],
                $_POST["Name"],
                $_POST["MobilePhone"],
                $_POST["TelePhone"],
                $_POST["Email"],
                $_POST["Duty"],
                $_POST["Sex"],
                $_POST["Star"],
                $_POST["Point"],
                $_POST["CertifyState"]
            );
        }else if($_POST["oper"]=='edit'){
            //修改
            $_POST["UserID"]=$_POST["id"];
            $ret = User::updateUsers(
                $_POST["UserID"],
                $_POST["Account"],
                $_POST["Password"],
                $_POST["UserType"],
                $_POST["Name"],
                $_POST["MobilePhone"],
                $_POST["TelePhone"],
                $_POST["Email"],
                $_POST["Duty"],
                $_POST["Sex"],
                $_POST["Star"],
                $_POST["Point"],
                $_POST["CertifyState"]
            );
        }else if($_POST["oper"]=='del'){
            //删除
            $ret = User::deleteUsers(
              $_POST["id"]
            );
        }else{
            return null;
        };
	}
}
?>