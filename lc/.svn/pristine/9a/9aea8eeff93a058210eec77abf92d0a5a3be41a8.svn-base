<?php
include_once(APP_PATH . "/utils/Utils.php");
include_once(APP_PATH . "/utils/ResponseResult.php");
include_once(MODELS_PATH . "/admin/Company.php");

class CompanyController extends APIBaseController
{
//	public function indexAction()
//	{
//		if(!IsSet($_GET["ID"]) || !Is_Numeric($_GET["ID"]))
//		{	$result = new ResponseResult(false,"参数有误");
//			echo $result->AsJSon();
//			return;
//		}
//
//		$ret = Company::getCompany($_GET["ID"]);
//
//		print_r($ret);
//	}

	public function saveAction()
    {
        //print_r($_POST);
        if($_POST["oper"]=='add'){
        //插入
        $ret = Company::insertCompany(
            $_POST["Name"],
            $_POST["Address"],
            $_POST["Description"],
            $_POST["VIP"],
            $_POST["Code"],
            $_POST["CertifyState"]
        );
        }else if($_POST["oper"]=='edit'){
        //修改
            $_POST["ID"]=$_POST["id"];
        $ret = Company::updateCompany(
            $_POST["ID"],
            $_POST["Name"],
            $_POST["Address"],
            $_POST["Description"],
            $_POST["VIP"],
            $_POST["Code"],
            $_POST["CertifyState"]
            //$_POST["State"]
        );
        }else if($_POST["oper"]=='del'){
        //删除
        $ret = Company::deleteCompany(
          //ID拿不到 可以拿到的是行号id
          $_POST["id"]
        );
        }else{
        return null;
        };
    }
}
?>